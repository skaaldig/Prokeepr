{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}

<!--BEGIN RENTAL FORM-->
<div class="row rental__wrapper">

  <div class="rental__form-wrapper">
    <h5>Select the date you will return the unit</h5>
    <form method="post">
      {% csrf_token %}
      <div class="form-group product__input-wrapper">
        <div class="input-group date" id="id_rental_end" data-target-input="nearest">
            {{ form.rental_end }}
          <div class="input-group-append datetimepicker-input" data-target="#id_rental_end" data-toggle="datetimepicker">
            <div class="input-group-text"><i class="fa fa-calendar"></i></div>
          </div>
        </div>
      </div>

      {% if form.rental_end.errors %}
      <div class="rental__errors">
        <p>{{ form.rental_end.errors.as_text }}</p>
      </div>
      {% endif %}

      <button type="submit" class="button button--borrow">Borrow</button>
    </form>
  </div>

  <div class="rental__info">
    <h4 class="display-4 rental__begin-text">Your Rental Will Begin:</h4>
    <div class="rental__begin-date">
      {% now 'm/d/Y' %}
    </div>
  </div>

</div>

<!--BEGIN PRODUCT DETAILS-->
<div class="row mt-5 product__wrapper">

  <div class="col-3 product__image-wrapper">
    {% if product.image %}
    <img class="product__image" src="{{ product.image.url }}">
    {% else %}
    <img class="product__image" src="https://via.placeholder.com/400x321">
    {% endif %}
  </div>

  <div class="col-5 product__details">
    <h5 class="display-4 product__header">{{ product.manufacturer|title }} - {{ product.human_readable_name|title }}</h5>
    <span class="product__id">Model: {{ product.model_number }}</span>
    <span class="product__id">Serial: {{ product.serial_number }} </span>
  </div>

  <div class="col-4 product__controls px-3">
    <h5 class="product__status">{{ product.get_loan_status_display }}</h5>
    <p>Location - {{ product.warehouse }} Warehouse</p>
  </div>

</div>

<script>
  $(function () {
    $("#id_rental_end").datetimepicker({
      format: 'L'
    });
  });
</script>

<script>
  $
</script>
{% endblock %}
